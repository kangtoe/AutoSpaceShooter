# 웨이브 시스템

## 개요

AutoSpaceShooter의 웨이브 시스템은 **런(Run) 기반 구조**로 게임 시작부터 종료까지 명확한 진행 구조를 제공합니다.

## 게임 구조

### 런(Run)
하나의 플레이 세션 전체를 의미합니다.
- **시작**: 게임 시작
- **종료**: 플레이어 사망 또는 최종 보스 클리어
- **목표 플레이타임**: 최대 30분

### 웨이브(Wave)
런을 구성하는 주요 진행 단위입니다.
- 하나 이상의 **스폰 그룹**으로 구성
- **완료 조건**: 웨이브 내 모든 적 격파
- 이전 웨이브 완료 전까지 다음 웨이브 시작 안 됨

### 스폰 그룹(Spawn Group)
하나 이상의 적 스폰 정보를 정의합니다.
- 무엇을 (적 종류 - 단일 또는 혼합)
- 언제 (시작 시간)
- 어디서 (스폰 위치)
- 얼마나 (각 적 종류별 개수)
- 어떻게 (각 적 종류별 간격)

여러 스폰 그룹이 동시에 실행될 수 있으며, 하나의 스폰 그룹에 여러 적 종류를 섞을 수 있습니다.

## 웨이브 진행 흐름

```
게임 시작
    ↓
웨이브 1 시작
├─ 스폰 그룹 A: kido × 5 (0초 시작, 단일 적)
├─ 스폰 그룹 B: thunder × 3 (5초 시작, 단일 적)
└─ 스폰 그룹 C: Ghost × 2 (10초 시작, 단일 적)
    ↓
모든 적 격파 확인
    ↓
웨이브 1 완료
    ↓
웨이브 2 시작
├─ 스폰 그룹 D: Hornet × 4 + Ghost × 2 (0초 시작, 혼합)
└─ 스폰 그룹 E: tank × 2 (5초 시작, 단일 적)
    ↓
...
```

## 스폰 그룹 구성 요소

| 요소 | 설명 | 예시 |
|------|------|------|
| 적 종류 | 스폰할 적 프리팹 (단일 또는 여러 종류) | Enemy_light_kido<br>또는 kido × 5 + thunder × 3 |
| 시작 시간 | 웨이브 시작 후 스폰 시작 시간(초) | 5.0 |
| 스폰 위치 | 화면 위치 | Up/Down/Left/Right/Random |
| 개수 | 각 적 종류별 스폰 수량 | kido: 5마리, thunder: 3마리 |
| 간격 | 각 적 종류별 스폰 간격(초) | kido: 0.5초, thunder: 0.3초 |

## 스폰 위치 전략

| 위치 | 특징 | 권장 사용처 | 난이도 |
|------|------|------------|--------|
| **Up** | 플레이어 전방 | 정면 대치, 사격형 적 | 쉬움 |
| **Down** | 플레이어 후방 | 포위 패턴, 돌격형 적 | 어려움 |
| **Left/Right** | 플레이어 측면 | 측면 공격, 회피 유도 | 중간 |
| **Random** | 4방향 무작위 | 예측 불가 패턴 | 중간 |

**스폰 그룹 조합 예시**:
```
웨이브 5:
- 그룹 A: tank × 3 (Up, 0초 시작, 간격 1초)    // 정면 압박
- 그룹 B: thunder × 8 (Down, 0초 시작, 간격 0.3초)  // 동시에 후방 돌격
- 그룹 C: Gunship × 1 (Left, 5초 시작)         // 5초 후 측면 추가

웨이브 10 (혼합 스폰 그룹 예시):
- 그룹 A: child × 10 + kido × 5 (Random, 0초 시작, 각각 0.3초 간격)
  // 약한 적 무리를 하나의 그룹으로
- 그룹 B: Hornet × 3 + Ghost × 2 (Up, 3초 시작, 각각 1초 간격)
  // Mid 등급 혼합 편대
```

## 적 종류

웨이브 구성 시 사용 가능한 적 목록입니다.

### 등급별 분류
- **Light 등급** (50-100점): child, kido, shield, thunder
- **Mid 등급** (250-600점): Ghost, Hornet, Knight, Spiral, tank, sniper, master
- **Heavy 등급** (800-1000점): mother, Gunship
- **Boss 등급** (1000점): Boss

상세 스탯 및 특성은 [EnemyList.md](EnemyList.md), AI 패턴은 [EnemyAI.md](EnemyAI.md) 참고

## 난이도 곡선 설계

### 초반 웨이브 (웨이브 1-5) - 워밍업
- **구성**: Light 위주, 3-5마리, 단순 패턴
- **위치**: Random/Up
- **스폰 그룹**: 1-2개
- **난이도**: ▁▁▂▂

**예시**:
```
웨이브 1:
- child × 3 (Random, 간격 1초)

웨이브 2:
- kido × 5 (Up, 간격 0.5초)

웨이브 3:
- shield × 2 (Down, 간격 2초)
- thunder × 4 (Random, 간격 0.5초)
```

### 중반 웨이브 (웨이브 6-15) - 긴장감 증가
- **구성**: Light 30% + Mid 70%, 5-10마리
- **위치**: 다양한 방향 혼합
- **스폰 그룹**: 2-3개
- **난이도**: ▃▃▄▅

**예시**:
```
웨이브 8:
- Hornet × 3 (Left, 간격 1.5초)
- Ghost × 5 (Random, 간격 0.5초)

웨이브 12:
- tank × 2 (Up, 간격 2초)
- thunder × 8 (Down, 간격 0.3초)
- kido × 4 (Right, 간격 0.5초)
```

### 후반 웨이브 (웨이브 16-25) - 고난이도
- **구성**: Mid 60% + Heavy 40%, 10-15마리
- **위치**: 다층 스폰 (3-4방향)
- **스폰 그룹**: 3-4개
- **난이도**: ▅▆▇█

**예시**:
```
웨이브 20:
- Spiral × 4 (Random, 간격 0.5초)
- Gunship × 2 (Up, 간격 3초)
- Knight × 6 (Down, 간격 0.3초)
- sniper × 3 (Right, 간격 1초)
```

### 보스 웨이브 (웨이브 30) - 클라이맥스
- **구성**: Boss + 주기적 Adds
- **스폰 그룹**: Boss 1개 + Adds 여러 개 (시간차 등장)
- **난이도**: ████

**예시**:
```
웨이브 30 (최종 보스):
- Boss × 1 (Up, 0초)
- thunder × 10 (Random, 30초, 간격 0.2초)  // 1차 Add
- Ghost × 5 (Left, 60초, 간격 0.5초)       // 2차 Add
- Spiral × 3 (Right, 90초, 간격 1초)       // 3차 Add
```

## 테마별 웨이브 설계

### 소환자 웨이브
**컨셉**: 지속적으로 증가하는 적, 우선순위 판단
```
웨이브 X:
- mother × 3 (Random, 간격 3초) → Child 지속 생성
- master × 2 (Up, 간격 2초) → 드론 소환
```

### 탄막 웨이브
**컨셉**: 화면 가득 채우는 탄막, 회피 스킬 테스트
```
웨이브 X:
- sniper × 5 (Up, 간격 1초)
- Gunship × 2 (Left, 간격 2초)
- Spiral × 3 (Right, 간격 1초)
```

### 돌격 웨이브
**컨셉**: 빠른 회피 반응 요구
```
웨이브 X:
- thunder × 10 (Random, 간격 0.2초)
- Knight × 5 (Down, 간격 0.5초)
```

### 혼합 웨이브
**컨셉**: 멀티태스킹 능력 테스트

**방식 1 - 여러 단일 스폰 그룹**:
```
웨이브 X:
- tank × 2 (Up, 간격 2초)        // 사격 위협
- thunder × 6 (Down, 간격 0.3초)  // 충돌 위협
- Gunship × 1 (Left, 0초)         // 거리 유지형
```

**방식 2 - 혼합 스폰 그룹**:
```
웨이브 X:
- 그룹 A: tank × 2 + Gunship × 1 (Up, 0초)
  // 원거리 위협 조합
- 그룹 B: thunder × 6 + shield × 3 (Down, 2초)
  // 돌격 + 탱커 조합
```

## 웨이브 구성 가이드라인

### 전체 웨이브 개수
- **목표**: 약 30개 웨이브 (30분 플레이타임 기준 웨이브당 평균 1분)
- **웨이브 1-5**: 워밍업
- **웨이브 6-15**: 중반 진행
- **웨이브 16-25**: 후반 고난이도
- **웨이브 26-29**: 최종 단계 준비
- **웨이브 30**: 최종 보스

### 난이도 곡선 패턴

**완만한 상승 (추천)**:
```
웨이브 1-5:   Light 100%
웨이브 6-10:  Light 50% + Mid 50%
웨이브 11-15: Light 30% + Mid 70%
웨이브 16-20: Mid 60% + Heavy 40%
웨이브 21-25: Mid 50% + Heavy 50%
웨이브 26-29: Mid 40% + Heavy 60%
웨이브 30:    Boss
```

**스파이크 패턴 (변칙적)**:
```
웨이브 1-5:   쉬운 웨이브
웨이브 6:     갑작스런 대량 스폰 (스파이크)
웨이브 7-10:  다시 중간 난이도
웨이브 11:    두 번째 스파이크
웨이브 12-20: 점진적 상승
웨이브 21:    세 번째 스파이크
웨이브 22-29: 높은 난이도 유지
웨이브 30:    Boss
```

## 밸런싱 체크리스트

### 스폰 밸런스
- [ ] 초반 5웨이브가 너무 어렵지 않은가?
- [ ] 웨이브당 적 수가 20마리 이하인가? (성능)
- [ ] 스폰 그룹 간 시간 간격이 충분한가?

### 난이도 곡선
- [ ] Light → Mid → Heavy 전환이 자연스러운가?
- [ ] 보스 전 웨이브가 적절한 난이도인가?
- [ ] 특정 웨이브가 너무 쉽거나 어렵지 않은가?

### 다양성
- [ ] 스폰 위치가 다양한가?
- [ ] 같은 적이 연속으로 3웨이브 이상 나오지 않는가?
- [ ] 테마별 웨이브가 골고루 섞여 있는가?

### 리듬감
- [ ] 긴장과 이완의 리듬이 있는가?
- [ ] 보스 웨이브 전에 쉬운 웨이브가 있는가?
- [ ] 웨이브 간 전환이 자연스러운가?

## 향후 확장 요소

### 절차적 웨이브 생성
현재는 수동으로 웨이브를 설정하지만, Nova Drift처럼 절차적으로 생성하는 시스템 검토 가능:
- 난이도 곡선 기반 자동 생성
- 적 조합 템플릿 (소환자 웨이브, 탄막 웨이브 등)
- 5/10의 배수 웨이브에 수작업 특수 웨이브 배치

상세 설계는 [ProceduralWaveGeneration.md](ProceduralWaveGeneration.md) 참고

### 경험치 및 보상 시스템
진행 시스템 개선 사항은 [PlayerLevelSystem.md](PlayerLevelSystem.md) 참고

## 참고

- [EnemyList.md](EnemyList.md): 적 스탯 및 목록
- [EnemyAI.md](EnemyAI.md): 적 AI 패턴
- [PlayerLevelSystem.md](PlayerLevelSystem.md): 경험치 및 레벨 시스템
- [ProceduralWaveGeneration.md](ProceduralWaveGeneration.md): 절차적 웨이브 생성 시스템
- [GameDesignOverview.md](GameDesignOverview.md): 전체 게임 디자인
- [Assets/Prefabs/Waves/](../../Assets/Prefabs/Waves/): Wave 프리팹
- [Assets/Prefabs/Enemys/](../../Assets/Prefabs/Enemys/): 적 프리팹
