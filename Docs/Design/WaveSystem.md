# 시간 기반 스폰 시스템

> Vampire Survivors 방식의 연속 스폰 시스템. 일정 간격마다 가중치 기반으로 적을 선택하고, 시간 경과에 따라 난이도가 상승합니다.

## 핵심 요약

- **스폰 방식**: 일정 간격(spawnInterval)마다 가중치로 적 선택
- **난이도 조절**: 시간 경과에 따른 스탯 스케일링 및 스폰 간격 감소
- **적 해금**: 특정 시간대(0-2분, 3-5분...)에 새 적 추가
- **특수 이벤트**: 5분, 10분, 15분, 20분에 미니보스/보스 등장

난이도 스케일링 상세는 [WaveScalingSystem.md](WaveScalingSystem.md) 참고

---

## 1. 스폰 메커니즘

### 1.1 연속 스폰 방식

**기본 구조**:
```
게임 시작
  ↓
spawnInterval마다 (초기 2.0초)
  ├─ 가중치로 적 선택
  ├─ 선택된 적 스폰
  └─ 다음 interval 대기
  ↓
시간 경과에 따라 interval 감소 (최소 1.0초)
```

**웨이브 개념 없음**:
- 명확한 "웨이브 1, 2, 3..."이 없음
- 게임 시작부터 종료까지 연속 스폰
- 완료 조건 없음 (모든 적 격파 대기 없음)

---

### 1.2 가중치 기반 적 선택

spawnInterval마다 가중치 리스트에서 적 선택

| 적 크기 | 가중치 범위 | 등장 빈도 | 예시 적 |
|---------|-------------|-----------|---------|
| 소형 | 60-100 | 매우 자주 | child, kido, thunder |
| 중형 | 20-40 | 보통 | Ghost, Hornet, tank |
| 대형 | 5-15 | 드물게 | Gunship, mother |

**시간대별 가중치 조정**:
- **0-2분**: 소형 위주 (대형 가중치 0)
- **3-7분**: 중형 추가, 대형 등장 시작
- **8분+**: 대형 빈도 증가

상세 공식 및 계수는 [WaveScalingSystem.md](WaveScalingSystem.md#12-가중치-기반-적-선택) 참고

---

### 1.3 스폰 위치 전략

| 위치 | 특징 | 권장 사용처 | 난이도 |
|------|------|------------|--------|
| **Up** | 플레이어 전방 | 정면 대치, 사격형 적 | 쉬움 |
| **Down** | 플레이어 후방 | 돌격형 적, 포위 패턴 | 어려움 |
| **Left/Right** | 플레이어 측면 | 회피 유도, 측면 압박 | 중간 |
| **Random** | 4방향 무작위 | 예측 불가 패턴 | 중간 |

**스폰 위치 선택 전략**:
- **소형 적**: Random/Up (플레이어가 대응하기 쉬움)
- **중형 적**: 다양한 방향 혼합 (긴장감 조절)
- **대형 적**: Down/Random (고난이도, 포위 압박)

---

## 2. 시간대별 난이도

### 2.1 적 타입 해금

| 경과 시간 | 해금 적 | 난이도 |
|-----------|---------|--------|
| 0-2분 | 기본 2종 (Light) | ▁▁ |
| 3-5분 | +2종 (Light + Mid) | ▂▃ |
| 6-8분 | +2종 (Mid) | ▄▅ |
| 9-11분 | +2종 (Mid + Heavy) | ▅▆ |
| 12분+ | 전체 + Elite | ▇█ |

### 2.2 시간대별 스탯 변화

| 시간 | 적 종류 | HP | 공격력 | 스폰 간격 |
|------|---------|----|----|---------|
| 0-2분 | 1-2종 | 100-130 | 10-12 | 2.0s |
| 3-5분 | 2-3종 | 145-190 | 13-15 | 1.7s |
| 6-8분 | 3-4종 | 190-245 | 16-18 | 1.4s |
| 9-11분 | 4-5종 | 245-310 | 19-21 | 1.2s |
| 12분+ | 전체 | 지수↑ | 지수↑ | 1.0s |

스케일링 공식 상세는 [WaveScalingSystem.md](WaveScalingSystem.md#11-적-스탯-스케일링) 참고

---

## 3. 적 등급 분류

### 3.1 등급별 목록

- **Light 등급** (50-100점): child, kido, shield, thunder
- **Mid 등급** (250-600점): Ghost, Hornet, Knight, Spiral, tank, sniper, master
- **Heavy 등급** (800-1000점): mother, Gunship
- **Boss 등급** (1000점): Boss

상세 스탯은 [EnemyList.md](EnemyList.md), AI 패턴은 [EnemyAI.md](EnemyAI.md) 참고

### 3.2 등급별 역할

| 등급 | 역할 | 스폰 빈도 | 위협도 |
|------|------|-----------|--------|
| Light | 압박, 수적 우위 | 매우 자주 | 낮음 |
| Mid | 전술적 위협 | 보통 | 중간 |
| Heavy | 보스급 위협 | 드물게 | 높음 |
| Boss | 클라이맥스 | 특수 이벤트 | 최고 |

---

## 4. 테마별 스폰 패턴

### 4.1 소환자 패턴
**컨셉**: 지속적으로 증가하는 적, 우선순위 판단

**등장 적**:
- mother (Child 지속 생성)
- master (드론 소환)

**특징**: 소환자를 먼저 처리하지 않으면 적 수가 기하급수적 증가

---

### 4.2 탄막 패턴
**컨셉**: 화면 가득 채우는 탄막, 회피 스킬 테스트

**등장 적**:
- sniper (정확한 사격)
- Gunship (광역 탄막)
- Spiral (나선형 탄막)

**특징**: 좁은 공간, 정밀한 회피 요구

---

### 4.3 돌격 패턴
**컨셉**: 빠른 회피 반응 요구

**등장 적**:
- thunder (고속 돌격)
- Knight (추적 돌격)

**특징**: 순간 반응 속도, 기동성 테스트

---

### 4.4 혼합 패턴
**컨셉**: 멀티태스킹 능력 테스트

**조합 예시**:
- tank (원거리 사격) + thunder (근거리 돌격)
- Gunship (탄막) + shield (탱커)

**특징**: 여러 위협을 동시에 처리해야 함

---

## 5. 특수 이벤트 (추후 구현)

특정 시간에 등장하는 **수동 디자인 특수 조우**

| 시간 | 이벤트 | 구성 예시 |
|------|--------|----------|
| 5분 | 미니보스 1차 | mother × 3 (Random) |
| 10분 | 대규모 습격 | 모든 등급 혼합 대량 스폰 |
| 15분 | 미니보스 2차 | Gunship × 2 + Adds |
| 20분+ | 보스 웨이브 | Boss × 1 + 주기적 Adds |

**디자인 의도**:
- 플레이어에게 예측 가능한 목표 제공
- 난이도 곡선에 변화 추가
- 달성감과 긴장감 조절

상세는 [WaveScalingSystem.md](WaveScalingSystem.md#15-특수-이벤트-추후-구현) 참고

---

## 6. 구현 고려사항

### 6.1 성능
- spawnInterval마다 적 1마리씩 스폰 (대량 동시 스폰 없음)
- 화면 내 적 최대 수 제한 권장 (예: 50마리)
- 적이 화면 밖으로 나가면 자동 제거

### 6.2 밸런싱
- 초반 2분은 충분히 쉽게 (튜토리얼 역할)
- 스폰 간격 최소값 1.0초 (너무 빠르지 않도록)
- 대형 적 가중치는 낮게 유지 (압도 방지)

### 6.3 플레이어 피드백
- 특수 이벤트 5초 전 경고 표시
- 현재 시간 및 생존 시간 UI 표시
- 화면 내 적 수 표시 (선택)

---

## 참고

- [WaveScalingSystem.md](WaveScalingSystem.md): 스케일링 공식 및 계수
- [EnemyList.md](EnemyList.md): 적 스탯 및 목록
- [EnemyAI.md](EnemyAI.md): 적 AI 패턴
- [PlayerLevelSystem.md](PlayerLevelSystem.md): 경험치 및 레벨 시스템
- [GameDesignOverview.md](GameDesignOverview.md): 전체 게임 디자인

---

## 문서 정보
- **작성일**: 2026-01-17
- **버전**: 2.0 (시간 기반 연속 스폰 방식으로 전면 개편)
- **변경 이력**:
  - v2.0: 웨이브 기반 → 시간 기반 연속 스폰 방식으로 전환
  - v1.0: 초기 웨이브 기반 시스템
