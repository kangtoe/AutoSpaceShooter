# 플레이어 레벨업 시스템

## 개요

AutoSpaceShooter의 플레이어 성장 시스템은 **경험치 → 레벨업 → 업그레이드 포인트 → 스탯 강화**의 순환 구조로 이루어져 있습니다.

## 시스템 구성 요소

### 1. 경험치 (Experience)
적을 처치하면 즉시 경험치를 획득합니다.

**획득 방식**:
- 적 처치 시 `LevelManager.GetExp()` 호출
- 경험치는 즉시 누적 (오브 수집 없음)

**경험치 량**:
- 경험치는 적의 `upgradePoint` 필드에 설정 (현재 대부분 0)
- 향후 적별로 다른 경험치 설정 가능

### 2. 레벨업 (Level Up)
경험치가 일정량에 도달하면 자동으로 레벨업됩니다.

**레벨 시스템**:
- 시작 레벨: 1
- 최대 레벨: 없음 (무제한)
- 다음 레벨 요구 경험치: `현재 레벨 × 1100`

**레벨별 요구 경험치 테이블**:
| 레벨 | 요구 경험치 | 누적 경험치 |
|------|------------|-----------|
| 1 → 2 | 1,100 | 1,100 |
| 2 → 3 | 2,200 | 3,300 |
| 3 → 4 | 3,300 | 6,600 |
| 4 → 5 | 4,400 | 11,000 |
| 5 → 6 | 5,500 | 16,500 |
| 10 → 11 | 11,000 | 60,500 |
| 20 → 21 | 22,000 | 231,000 |

**레벨업 보상**:
- 업그레이드 포인트 +1
- 레벨업 사운드 재생
- 업그레이드 화면 자동 열림

**경험치 오버플로우**:
- 남은 경험치는 다음 레벨로 이월
- 한 번에 여러 레벨 상승 가능 (경험치가 충분하면)

### 3. 점수 (Score)
적을 처치하면 점수를 획득합니다.

**점수 시스템**:
- 적 처치 시 `ScoreManager.AddScore()` 호출
- 점수는 경험치와 별개 (순수 스코어보드용)
- 점수는 UI에만 표시되며 게임플레이에 영향 없음

**적별 점수**:
- Light 등급: 50-100점
- Mid 등급: 250-600점
- Heavy 등급: 800-1000점
- Boss 등급: 1000점

상세 점수는 [EnemyList.md](EnemyList.md) 참고

### 4. 업그레이드 포인트 (Upgrade Point)
레벨업 시 획득하는 화폐로, 스탯 강화에 사용합니다.

**획득 방법**:
- 레벨업 시 1포인트 획득
- 일부 적 처치 시 추가 획득 (현재 대부분 0)

**사용 방법**:
- 업그레이드 화면에서 3개 랜덤 옵션 중 선택
- 1포인트 소비하여 스탯 강화
- 포인트가 남아있으면 계속 선택 가능

업그레이드 시스템 상세 설명은 [UpgradeSystem.md](UpgradeSystem.md) 참고

## 진행 흐름

```
적 처치
    ↓
점수 획득 (ScoreManager) + 경험치 획득 (LevelManager)
    ↓
경험치 누적
    ↓
요구 경험치 도달?
    ├─ NO: 계속 플레이
    └─ YES: 레벨업
         ↓
    업그레이드 포인트 +1
         ↓
    게임 일시정지 + 업그레이드 화면 표시
         ↓
    3개 랜덤 옵션 중 선택
         ↓
    포인트 소비 → 스탯 강화
         ↓
    포인트 남음?
    ├─ YES: 새 옵션 제시
    └─ NO: 업그레이드 화면 닫기 → 게임 재개
```

## 난이도 곡선

### 레벨 상승 속도
**요구 경험치가 선형 증가**하므로:
- 초반: 빠른 레벨업 (레벨 1→2는 1,100 경험치)
- 중반: 점진적으로 느려짐
- 후반: 레벨업이 매우 느림 (레벨 20→21은 22,000 경험치)

### 30분 플레이 예상 레벨
웨이브 30까지 플레이 시 예상 레벨 (적 처치 수 기준):
- Light 적 중심 (평균 70점): 약 150마리 처치 → 레벨 7-8
- Mid 적 중심 (평균 400점): 약 200마리 처치 → 레벨 10-12
- 혼합 (평균 250점): 약 250마리 처치 → 레벨 12-15

**참고**: 위 수치는 적의 `upgradePoint`가 점수와 동일하다고 가정한 예상치입니다.

## 밸런싱 가이드

### 경험치 곡선 조정
**현재 공식**: `다음 레벨 = 레벨 × 1100`

**조정 방향**:
- 더 빠른 성장: 계수 감소 (예: `레벨 × 900`)
- 더 느린 성장: 계수 증가 (예: `레벨 × 1300`)
- 지수적 성장: `레벨^2 × 500` (후반 급격히 느려짐)

### 적별 경험치 설정 권장
현재 대부분의 적이 `upgradePoint = 0`이므로, 점수에 비례하여 설정 권장:

| 등급 | 평균 점수 | 권장 경험치 | 비율 |
|------|----------|------------|------|
| Light | 70 | 70 | 1:1 |
| Mid | 400 | 200 | 1:2 |
| Heavy | 900 | 300 | 1:3 |
| Boss | 1000 | 500 | 1:2 |

**이유**:
- Light: 빠른 레벨업으로 초반 플레이 만족도 향상
- Mid/Heavy: 점수 대비 낮은 경험치로 후반 밸런스 조정

### 레벨업 빈도 목표
**권장 레벨업 간격**: 2-3분

30분 플레이 기준:
- 총 10-15회 레벨업
- 10-15개 업그레이드 선택
- 적절한 빌드 완성도

## 현재 시스템 한계 및 향후 개선

### 1. 경험치 획득 방식
**현재**: 적 처치 시 즉시 획득
**한계**: 플레이 스킬 표현 불가, 전략적 깊이 부족

**향후 개선 (경험치 오브 시스템)**:
- 적이 경험치 오브 드롭
- 플레이어가 오브를 수집해야 경험치 획득
- 오브에 제한 시간 추가 (미수집 시 사라짐)
- 오브 자동 수집 업그레이드 추가 가능

**참고**: Nova Drift는 이 방식으로 점수 시스템과 연동

### 2. 적별 경험치 설정
**현재**: 대부분의 적이 `upgradePoint = 0`
**개선**: 적별로 다른 경험치 설정으로 난이도 곡선 조절

### 3. 점수 시스템
**현재**: 순수 스코어보드용, 게임플레이 영향 없음
**개선 가능성**:
- 점수 누적에 따른 보너스
- 점수 기반 랭킹 시스템
- 점수 배율 시스템 (콤보)

## 관련 시스템

### LevelManager
- 경험치 및 레벨 관리
- 위치: `Assets/Scripts/LevelManager.cs`
- 주요 메서드:
  - `GetExp(int Amount)`: 경험치 획득
  - `LevelUp()`: 레벨업 처리

### ScoreManager
- 점수 관리
- 위치: `Assets/Scripts/ScoreManager.cs`
- 주요 메서드:
  - `AddScore(int score)`: 점수 추가

### UpgradeManager
- 업그레이드 선택 처리
- 위치: `Assets/Scripts/UpgradeManager.cs`
- 주요 메서드:
  - `PointUp(int amount)`: 업그레이드 포인트 증가 및 화면 열기

### EnemyShip
- 적 처치 시 콜백
- 위치: `Assets/Scripts/SpaceShips/EnemyShip.cs`
- 사망 시 자동 호출:
  - `ScoreManager.AddScore(point)`
  - `LevelManager.GetExp(upgradePoint)`

## 참고

- [UpgradeSystem.md](UpgradeSystem.md): 업그레이드 시스템 상세
- [EnemyList.md](EnemyList.md): 적별 점수 및 경험치
- [PlayerStats.md](PlayerStats.md): 플레이어 스탯 시스템
